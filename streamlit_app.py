import streamlit as st
import pandas as pd
import numpy as np
from datetime import date, time

# ì•± ì œëª©
st.title("ğŸ“š Streamlit ìœ„ì ¯ ë°ëª¨ â€” í•œ í˜ì´ì§€ ì˜ˆì œ")

# ì†Œê°œ í…ìŠ¤íŠ¸: ë§ˆí¬ë‹¤ìš´ê³¼ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ ì„¤ëª…ì„ ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
st.markdown("""
ì´ í˜ì´ì§€ëŠ” Streamlitì—ì„œ ë‹¨ì¼ í˜ì´ì§€ì— ë„£ì„ ìˆ˜ ìˆëŠ” ì£¼ìš” ìš”ì†Œ(ìœ„ì ¯, ë ˆì´ì•„ì›ƒ, ì°¨íŠ¸, ì…ë ¥ ë“±)ë¥¼
ì˜ˆì‹œì™€ í•¨ê»˜ ëª¨ë‘ ë³´ì—¬ì¤ë‹ˆë‹¤. ê° ì½”ë“œ ë¸”ë¡ ìœ„ì— í•œêµ­ì–´ ì£¼ì„(í•™ìŠµìš© ê°ì£¼)ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
""")

################################################################################
# í…ìŠ¤íŠ¸ / ì¶œë ¥ ê´€ë ¨
################################################################################

# ì¼ë°˜ í…ìŠ¤íŠ¸ ì¶œë ¥ (ê°ì²´ë¥¼ ê·¸ëŒ€ë¡œ ì¶œë ¥í•˜ë©´ pretty-format ì²˜ë¦¬ê°€ ë©ë‹ˆë‹¤)
st.write("í…ŒìŠ¤íŠ¸ ì¶œë ¥: ìˆ«ì, ë¦¬ìŠ¤íŠ¸, dict ë“± ë‹¤ì–‘í•œ íƒ€ì…ì„ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
st.write({"key": "value", "num": 123})  # dict ì¶œë ¥ ì˜ˆì‹œ

# ì½”ë“œ ë¸”ë¡ì„ ë³´ì—¬ì£¼ê¸°
st.code("print('Hello, Streamlit')")  # ì£¼ë¡œ ë¬¸ì„œë‚˜ ì˜ˆì‹œ ì½”ë“œ ë³´ì—¬ì¤„ ë•Œ ì‚¬ìš©

# LaTeX ìˆ˜ì‹
st.latex(r"E = mc^2")  # ìˆ˜ì‹ ë Œë”ë§ ì˜ˆì‹œ

################################################################################
# ì…ë ¥ ìœ„ì ¯ (ì‚¬ìš©ì ìƒí˜¸ì‘ìš©)
################################################################################

st.header("ì…ë ¥ ìœ„ì ¯ ì˜ˆì‹œ")

# ë²„íŠ¼: í´ë¦­ ì‹œ Trueë¥¼ ë°˜í™˜
if st.button("í´ë¦­ ë²„íŠ¼ (st.button)"):
    st.write("ë²„íŠ¼ì´ í´ë¦­ë˜ì—ˆìŠµë‹ˆë‹¤!")

# ì²´í¬ë°•ìŠ¤: True/False
agree = st.checkbox("ë™ì˜í•©ë‹ˆë‹¤ (st.checkbox)")
st.write("ë™ì˜ ì—¬ë¶€:", agree)

# ë¼ë””ì˜¤: í•˜ë‚˜ ì„ íƒ
choice = st.radio("ë¼ë””ì˜¤ ì„ íƒ (st.radio)", ("ì˜µì…˜ A", "ì˜µì…˜ B", "ì˜µì…˜ C"))
st.write("ì„ íƒí•œ í•­ëª©:", choice)

# ì…€ë ‰íŠ¸ë°•ìŠ¤: í•˜ë‚˜ ì„ íƒ (ê¸´ ëª©ë¡ì—ì„œ ìœ ìš©)
color = st.selectbox("ì»¬ëŸ¬ ì„ íƒ (st.selectbox)", ["Red", "Green", "Blue"]) 
st.write("ì„ íƒí•œ ì»¬ëŸ¬:", color)

# ë©€í‹°ì…€ë ‰íŠ¸: ë‹¤ì¤‘ ì„ íƒ
items = st.multiselect("ì—¬ëŸ¬ í•­ëª© ì„ íƒ (st.multiselect)", ["ì‚¬ê³¼","ë°”ë‚˜ë‚˜","ì²´ë¦¬"], default=["ì‚¬ê³¼"]) 
st.write("ì„ íƒí•œ ê³¼ì¼:", items)

# ìŠ¬ë¼ì´ë”: ìˆ«ì ë²”ìœ„
age = st.slider("ë‚˜ì´ ì„ íƒ (st.slider)", 0, 120, 30)
st.write("ë‚˜ì´:", age)

# ìˆ«ì ì…ë ¥
num = st.number_input("ìˆ«ì ì…ë ¥ (st.number_input)", value=10)
st.write("ì…ë ¥í•œ ìˆ«ì:", num)

# í…ìŠ¤íŠ¸ ì…ë ¥ ë° ì˜ì—­
name = st.text_input("ì´ë¦„ ì…ë ¥ (st.text_input)")
bio = st.text_area("ìê¸°ì†Œê°œ (st.text_area)")
st.write("ì´ë¦„/ì†Œê°œ:", name, bio)

# ë‚ ì§œ/ì‹œê°„ ì…ë ¥
dob = st.date_input("ìƒì¼ (st.date_input)", value=date.today())
appt = st.time_input("ì„ í˜¸ ì‹œê°„ (st.time_input)", value=time(12, 0))
st.write(dob, appt)

# íŒŒì¼ ì—…ë¡œë”
uploaded = st.file_uploader("íŒŒì¼ ì—…ë¡œë“œ (st.file_uploader)")
if uploaded is not None:
    # ì—…ë¡œë“œëœ íŒŒì¼ì„ ì½ì–´ ë³´ì—¬ì¤Œ
    st.write("ì—…ë¡œë“œ íŒŒì¼ ì´ë¦„:", uploaded.name)
    try:
        text = uploaded.getvalue().decode("utf-8")
        st.text_area("íŒŒì¼ ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°:", value=text, height=200)
    except Exception:
        st.write("ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë˜ëŠ” í…ìŠ¤íŠ¸ ë””ì½”ë”© ì‹¤íŒ¨")

# ìƒ‰ìƒ ì„ íƒ
col = st.color_picker("ìƒ‰ ì„ íƒ (st.color_picker)", "#00f900")
st.write("ì„ íƒëœ ìƒ‰ìƒ:", col)

################################################################################
# ë ˆì´ì•„ì›ƒ: ì‚¬ì´ë“œë°”, ì»¬ëŸ¼, í™•ì¥(Expander)
################################################################################

st.header("ë ˆì´ì•„ì›ƒ ë° êµ¬ì„±")

# ì‚¬ì´ë“œë°” ì‚¬ìš©í•˜ê¸°
st.sidebar.header("ì‚¬ì´ë“œë°” ì»¨íŠ¸ë¡¤")
sb_val = st.sidebar.slider("ì‚¬ì´ë“œë°” ìŠ¬ë¼ì´ë”", 0, 100, 25)
st.sidebar.write("ì‚¬ì´ë“œë°” ê°’:", sb_val)

# ì»¬ëŸ¼ ë ˆì´ì•„ì›ƒ
col1, col2, col3 = st.columns(3)
col1.metric("ì˜¨ë„", "23Â°C", "-1Â°C")  # ê°„ë‹¨í•œ ë©”íŠ¸ë¦­ ì¹´ë“œ
col2.write("ì—¬ê¸°ëŠ” ì¤‘ê°„ ì»¬ëŸ¼")
col3.write("ì„¸ ë²ˆì§¸ ì»¬ëŸ¼")

# Expander (ì ‘ì„ ìˆ˜ ìˆëŠ” ë°•ìŠ¤)
with st.expander("ì¶”ê°€ ì„¤ëª…(í´ë¦­í•´ì„œ í¼ì¹˜ê¸°)"):
    st.write("ì—¬ê¸°ì— ê¸´ ì„¤ëª…ì´ë‚˜ ì½”ë“œ, ë¡œê·¸ ë“±ì„ ìˆ¨ê²¨ë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤.")

################################################################################
# ì°¨íŠ¸ ë° ë°ì´í„° ì‹œê°í™”
################################################################################

st.header("ì°¨íŠ¸ ë° ì‹œê°í™”")

# ìƒ˜í”Œ ë°ì´í„° ìƒì„±
df = pd.DataFrame(np.random.randn(20, 3), columns=["a", "b", "c"])  # ì„ì˜ ë°ì´í„°
st.line_chart(df)  # ë¼ì¸ ì°¨íŠ¸
st.area_chart(df)  # ë©´ì  ì°¨íŠ¸
st.bar_chart(df.abs().sum().to_frame("sum"))  # ê°„ë‹¨ ë°” ì°¨íŠ¸

# ì§€ë„ (ìœ„ë„, ê²½ë„ í•„ìš”)
map_df = pd.DataFrame(
    np.random.randn(100, 2) / [50, 50] + [37.56, 126.97], columns=["lat", "lon"]
)
st.map(map_df)  # ì„œìš¸ ê·¼ì²˜ ëœë¤ í¬ì¸íŠ¸ í‘œì‹œ(ì˜ˆì‹œ)

################################################################################
# ë¯¸ë””ì–´ ë° ê¸°íƒ€ ì¶œë ¥ ì˜ˆì‹œ
################################################################################

st.header("ë¯¸ë””ì–´ ë° ê¸°íƒ€ ì¶œë ¥ ì˜ˆì‹œ")

# ì´ë¯¸ì§€ ì¶œë ¥ ì˜ˆì‹œ
# - `use_column_width=True` ëŠ” ì»¨í…Œì´ë„ˆ í­ì— ë§ì¶° ì´ë¯¸ì§€ë¥¼ ìë™ìœ¼ë¡œ ëŠ˜ë¦½ë‹ˆë‹¤.
st.subheader("ì´ë¯¸ì§€ (st.image)")
img = np.zeros((100, 200, 3), dtype=np.uint8)  # ê²€ì€ìƒ‰ ìƒ˜í”Œ ì´ë¯¸ì§€ ìƒì„±
st.image(img, caption="ìƒ˜í”Œ ì´ë¯¸ì§€", use_column_width=False)

# ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ ì¬ìƒ ì˜ˆì‹œ
st.subheader("ì˜¤ë””ì˜¤ / ë¹„ë””ì˜¤ (st.audio, st.video)")
# ê°„ë‹¨í•œ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ë¥¼ ì¬ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì„¤ëª…ìš©ìœ¼ë¡œ ë¹ˆ ë°”ì´íŠ¸ ì‚¬ìš©.
st.audio(b"", format="audio/wav")  # ì‹¤ì œ ì˜¤ë””ì˜¤ íŒŒì¼ ì—…ë¡œë“œ í›„ ì‚¬ìš© ê¶Œì¥
st.video(b"")  # ì‹¤ì œ ë¹„ë””ì˜¤ íŒŒì¼ ì—…ë¡œë“œ í›„ ì‚¬ìš© ê¶Œì¥

# JSON, í…Œì´ë¸”, ë°ì´í„°í”„ë ˆì„ ì¶œë ¥
st.subheader("JSON / Table / DataFrame")
sample_json = {"name": "í™ê¸¸ë™", "age": 20, "skills": ["íŒŒì´ì¬", "ë°ì´í„°"]}
st.json(sample_json)  # JSON êµ¬ì¡°ë¥¼ ë³´ê¸° ì¢‹ê²Œ ë Œë”ë§
st.table(df.head())  # ì •ì  í‘œ ì¶œë ¥
st.dataframe(df.style.highlight_max(axis=0))  # ëŒ€í™”í˜• ë°ì´í„°í”„ë ˆì„ (ìŠ¤íƒ€ì¼ë„ ì ìš© ê°€ëŠ¥)

# ë‹¤ìš´ë¡œë“œ ë²„íŠ¼: í´ë¼ì´ì–¸íŠ¸ì—ê²Œ íŒŒì¼ì„ ì œê³µí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
st.subheader("íŒŒì¼ ë‹¤ìš´ë¡œë“œ (st.download_button)")
csv = df.to_csv(index=False).encode("utf-8")
st.download_button("ìƒ˜í”Œ CSV ë‹¤ìš´ë¡œë“œ", data=csv, file_name="sample.csv", mime="text/csv")

# ë¹ˆ ê³µê°„/ìë¦¬í‘œì‹œì: ë™ì ìœ¼ë¡œ ë‚´ìš©ì„ ì—…ë°ì´íŠ¸í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.
st.subheader("ë¹ˆ ê³µê°„/ìë¦¬í‘œì‹œì (st.empty)")
placeholder = st.empty()
placeholder.write("ì—¬ê¸°ëŠ” ë‚˜ì¤‘ì— ì—…ë°ì´íŠ¸ë  ì˜ì—­ì…ë‹ˆë‹¤.")

# ìº¡ì…˜/ì¸í¬/ê²½ê³ /ì—ëŸ¬ ë©”ì‹œì§€ ì˜ˆì‹œ
st.caption("ì´ê²ƒì€ ì‘ì€ ìº¡ì…˜ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤.")
st.info("ì´ê²ƒì€ ì •ë³´ ë©”ì‹œì§€ì…ë‹ˆë‹¤.")
st.success("ì„±ê³µ ë©”ì‹œì§€ ì˜ˆì‹œ")
st.warning("ê²½ê³  ë©”ì‹œì§€ ì˜ˆì‹œ")
st.error("ì—ëŸ¬ ë©”ì‹œì§€ ì˜ˆì‹œ")

# ì˜ˆì™¸ ì¶œë ¥: try/exceptì—ì„œ ì˜¤ë¥˜ë¥¼ ë³´ì—¬ì¤„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
st.subheader("ì˜ˆì™¸ ì¶œë ¥ (st.exception)")
try:
    1 / 0
except Exception as e:
    st.exception(e)

# ìƒí˜¸ì‘ìš© ì˜ˆì‹œ: Progress, Spinner, Balloons
################################################################################

st.header("ì¸í„°ë™í‹°ë¸Œ í”¼ë“œë°±")
if st.button("ì‘ì—… ì‹œì‘ (ì§„í–‰ë°”/ìŠ¤í”¼ë„ˆ ì˜ˆì‹œ)"):
    with st.spinner("ì‘ì—… ì§„í–‰ ì¤‘..."):
        import time

        for i in range(101):
            time.sleep(0.01)
            st.progress(i)
    st.success("ì‘ì—… ì™„ë£Œ!")
    st.balloons()

################################################################################
# ì„¸ì…˜ ìƒíƒœ ê°„ë‹¨ ì˜ˆì‹œ
################################################################################

st.header("`st.session_state` ì˜ˆì‹œ")
if "count" not in st.session_state:
    st.session_state.count = 0

def increment():
    st.session_state.count += 1

st.write("í˜„ì¬ ì¹´ìš´íŠ¸:", st.session_state.count)
st.button("ì¦ê°€", on_click=increment)

################################################################################
# Form ì‚¬ìš© ì˜ˆì‹œ (ì œì¶œ í˜•íƒœ ìˆ˜ì§‘)
################################################################################

st.header("Form ì˜ˆì‹œ")
with st.form(key="my_form"):
    fname = st.text_input("ì´ë¦„ (form)")
    age = st.number_input("ë‚˜ì´ (form)", min_value=0, max_value=150, value=20)
    submitted = st.form_submit_button("ì œì¶œ")
    if submitted:
        st.write(f"ì œì¶œëœ ì´ë¦„: {fname}, ë‚˜ì´: {age}")

################################################################################
# ì½”ë“œ ì¶œë ¥/ë””ë²„ê·¸: st.echo
################################################################################

st.header("ì½”ë“œ ì¶œë ¥ (st.echo)")
with st.echo():
    # ì´ ë¸”ë¡ ì•ˆì˜ ì½”ë“œëŠ” í™”ë©´ì— ì½”ë“œë¡œë„ ë³´ì—¬ì£¼ê³  ì‹¤í–‰ë„ í•©ë‹ˆë‹¤.
    x = 10
    y = 20
    z = x + y
    st.write("echo ê²°ê³¼ z=", z)

################################################################################
# ë§ˆë¬´ë¦¬ ì•ˆë‚´
################################################################################

st.info("íŒŒì¼ì„ ì‹¤í–‰í•˜ë ¤ë©´ í„°ë¯¸ë„ì—ì„œ `streamlit run streamlit_app.py` ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.")

# ë: ì´ ì˜ˆì œ íŒŒì¼ì„ ê³µë¶€ìš©ìœ¼ë¡œ ììœ ë¡­ê²Œ ìˆ˜ì •í•´ë³´ì„¸ìš”.
